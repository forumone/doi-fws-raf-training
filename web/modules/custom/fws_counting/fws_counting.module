<?php

/**
 * @file
 * Primary module hooks for FWS Counting module.
 */

/**
 * Implements hook_theme().
 */
function fws_counting_theme() {
  return [
    'counting_skills_page' => [
      'variables' => [
        'intro_text' => NULL,
        'form' => NULL,
        'citation' => NULL,
        'credits' => NULL,
      ],
    ],
    'counting_experience_form' => [
      'render element' => 'form',
    ],
    'counting_confirmation_form' => [
      'render element' => 'form',
    ],
    'counting_quiz' => [
      'variables' => [
        'experience_level' => NULL,
        'size_ranges' => [],
        'images' => [],
        'viewing_time' => NULL,
        'results_node_id' => NULL,
        'base_path' => NULL,
      ],
    ],
  ];
}

/**
 * Implements hook_preprocess_counting_quiz().
 */
function fws_counting_preprocess_counting_quiz(&$variables) {
  // Ensure base_path is available in the template.
  if (!isset($variables['base_path'])) {
    $variables['base_path'] = base_path();
  }
}

/**
 * Implements hook_preprocess_html().
 */
function fws_counting_preprocess_html(&$variables) {
  $route_name = \Drupal::routeMatch()->getRouteName();

  // Add 'fws-quiz' class to body for all pages from this module.
  if (strpos($route_name, 'fws_counting') === 0) {
    $variables['attributes']['class'][] = 'fws-quiz fws-quiz--counting';
  }
}
